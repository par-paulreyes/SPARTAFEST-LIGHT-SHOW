<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event LED Light - Secure Admin Control</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .login-form {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            max-width: 400px;
            width: 90%;
        }
        
        .login-form h2 {
            margin-bottom: 30px;
            color: #333;
            font-size: 2em;
        }
        
        .login-form input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .login-form input:focus {
            border-color: #667eea;
        }
        
        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.3s;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
        }
        
        .error-message {
            color: #dc3545;
            margin-top: 15px;
            font-weight: 600;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        
        .logout-btn {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
            border: 2px solid #dc3545;
            padding: 8px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background: #dc3545;
            color: white;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: rgba(0, 0, 0, 0.05);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .status-card.connected {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }
        
        .status-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .status-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .user-count {
            color: #28a745;
        }
        
        .control-section {
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.02);
            padding: 25px;
            border-radius: 15px;
        }
        
        .control-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .color-btn {
            width: 80px;
            height: 80px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .color-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .color-btn.active {
            transform: scale(0.95);
            box-shadow: inset 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .custom-color {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        .custom-color input[type="color"] {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .effect-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }
        
        .effect-btn {
            padding: 15px 20px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            color: #333;
        }
        
        .effect-btn:hover {
            border-color: #667eea;
            background: #667eea;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }
        
        .effect-btn.active {
            background: #667eea;
            border-color: #667eea;
            color: white;
        }
        
        .pattern-lights {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .pattern-light {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .pattern-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .pattern-btn {
            padding: 8px 15px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .pattern-btn:hover, .pattern-btn.active {
            background: #667eea;
            color: white;
        }
        
        .slider-control {
            margin: 20px 0;
        }
        
        .slider-control label {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-weight: 600;
        }
        
        .slider-control input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider-control input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .primary-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .primary-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .secondary-btn {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #dee2e6;
        }
        
        .secondary-btn:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .emergency-btn {
            background: linear-gradient(45deg, #dc3545, #c82333);
            color: white;
        }
        
        .emergency-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(220, 53, 69, 0.4);
        }
        
        .preview {
            width: 100%;
            height: 80px;
            border-radius: 15px;
            margin: 20px 0;
            transition: all 0.3s ease;
            background: #000;
            border: 3px solid #ddd;
            position: relative;
            overflow: hidden;
        }
        
        .preview-pattern {
            display: flex;
            height: 100%;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .preview-light {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #333;
        }
        
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 20px;
            text-decoration: none;
            color: #333;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        
        .hidden { display: none !important; }
        
        .strobe { animation: strobe 0.1s infinite; }
        .pulse { animation: pulse 1s ease-in-out infinite; }
        .fade { animation: fade 2s ease-in-out infinite; }
        .wave { animation: wave 1.5s ease-in-out infinite; }
        .rainbow { animation: rainbow 3s linear infinite; }
        
        @keyframes strobe {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.1; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
        
        @keyframes fade {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes rainbow {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .container { padding: 20px; }
            .status-grid { grid-template-columns: 1fr; }
            .effect-grid { grid-template-columns: repeat(2, 1fr); }
            .action-buttons { flex-direction: column; }
            .action-btn { min-width: unset; }
        }

        .toast {
            background-color: #333;
            color: #fff;
            padding: 12px 20px;
            margin-bottom: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            font-size: 0.95em;
            opacity: 0;
            transform: translateX(100%);
            animation: slideIn 0.4s forwards, fadeOut 0.4s 3s forwards;
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        .refresh-btn {
            margin-top: 10px;
            padding: 10px 20px;
            border-radius: 10px;
            background: linear-gradient(45deg, #6a11cb, #2575fc);
            color: #fff;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            font-size: 1em;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .refresh-btn:hover {
            transform: scale(1.05) rotate(1deg);
            box-shadow: 0 8px 18px rgba(102, 126, 234, 0.4);
        }

        /* Add spinning icon on hover */
        .refresh-btn::before {
            content: "‚ü≥";
            display: inline-block;
            transition: transform 0.5s ease-in-out;
        }

        .refresh-btn:hover::before {
            transform: rotate(360deg);
        }


    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-form">
            <h2>üîê Admin Access</h2>
            <input type="text" id="adminUsername" placeholder="Email" autocomplete="username">
            <input type="password" id="adminPassword" placeholder="Password" autocomplete="current-password">
            <button class="login-btn" id="loginBtn">Login</button>
            <div class="error-message" id="loginError"></div>
        </div>
    </div>

    <a href="index.html" class="back-link">‚Üê Back to User View</a>
    
    <div class="container" id="mainApp">
        <div class="header">
            <h1>SPARTAFEST LIGHT SHOW</h1>
            <p>Advanced admin control panel</p>
            <button class="logout-btn" id="logoutBtn">Logout</button>
        </div>
        
        <div class="status-grid">
            <div class="status-card" id="connectionCard">
                <h3>üîó Connection</h3>
                <div class="status-value" id="connectionStatus">Connecting...</div>
            </div>
            <div class="status-card">
                <button class="refresh-btn" id="refreshUserCount"> Users </button>
                <div class="status-value user-count" id="userCount">0</div>
            </div>
            <div class="status-card">
                <h3> Action </h3>
                <button class="action-btn primary-btn" id="sendCommand"> Send Command </button>
            </div>
        </div>
        
        <div class="control-section">
            <h3>üì± Preview</h3>
            <div class="preview" id="preview">
                <div class="preview-pattern" id="previewPattern">
                    <div class="preview-light"></div>
                    <div class="preview-light"></div>
                    <div class="preview-light"></div>
                </div>
            </div>
        </div>

        <div class="control-section">
            <h3>‚ú® Effects & Patterns</h3>
            <div class="effect-grid">
                <button class="effect-btn active" data-effect="solid">Solid</button>
                <button class="effect-btn" data-effect="strobe">Strobe</button>
                <button class="effect-btn" data-effect="pulse">Pulse</button>
                <button class="effect-btn" data-effect="fade">Fade</button>
                <button class="effect-btn" data-effect="flash">Flash</button>
                <button class="effect-btn" data-effect="wave">Wave</button>
                <button class="effect-btn" data-effect="rainbow">Rainbow</button>
                <button class="effect-btn" data-effect="pattern">Custom Pattern</button>
            </div>
            
            <div class="pattern-designer" id="patternDesigner" style="display: none;">
                <h4>üéØ Custom Pattern Colors</h4>
                <div class="custom-color" style="flex-wrap: wrap; justify-content: center;">
                    <label>Color 1: <input type="color" class="pattern-color" data-index="0" value="#ff0000"></label>
                    <label>Color 2: <input type="color" class="pattern-color" data-index="1" value="#00ff00"></label>
                    <label>Color 3: <input type="color" class="pattern-color" data-index="2" value="#0000ff"></label>
                </div>
            </div>
        </div>
        
        <div class="control-section">
            <h3>üé® Color Selection</h3>
            <div class="color-grid">
                <button class="color-btn" style="background: #ff0000;" data-color="#ff0000"></button>
                <button class="color-btn" style="background: #00ff00;" data-color="#00ff00"></button>
                <button class="color-btn" style="background: #0000ff;" data-color="#0000ff"></button>
                <button class="color-btn" style="background: #ffff00;" data-color="#ffff00"></button>
                <button class="color-btn" style="background: #ff00ff;" data-color="#ff00ff"></button>
                <button class="color-btn" style="background: #00ffff;" data-color="#00ffff"></button>
                <button class="color-btn" style="background: #ff8000;" data-color="#ff8000"></button>
                <button class="color-btn" style="background: #8000ff;" data-color="#8000ff"></button>
                <button class="color-btn" style="background: #ffffff;" data-color="#ffffff"></button>
                <button class="color-btn" style="background: #000000;" data-color="#000000"></button>
            </div>
            
            <div class="custom-color">
                <input type="color" id="customColor" value="#ff0000">
                <span>Custom Color</span>
            </div>
        </div>
    
        <div class="control-section">
            <div class="slider-control">
                <label for="speed">‚ö° Effect Speed: <span id="speedValue">1x</span></label>
                <input type="range" id="speed" min="0.1" max="3" step="0.1" value="1">
            </div>
            
            <div class="slider-control">
                <label for="intensity">üí° Brightness: <span id="intensityValue">100%</span></label>
                <input type="range" id="intensity" min="0.1" max="1" step="0.1" value="1">
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn primary-btn" id="standbyBtn">üì¥ Standby Mode</button>
            <button class="action-btn emergency-btn" id="emergencyStop">üö® Emergency Stop</button>
            <button class="action-btn emergency-btn" id="clearAllBtn">‚ö†Ô∏è Clear Databases</button>
        </div>
    </div>

    <div id="toastContainer" style="position: fixed; top: 20px; right: 20px; z-index: 99999;"></div>


    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    
    <script>
        const firebaseConfigs = [
            {
                "apiKey": "AIzaSyCHkiw5mKCQtauICu10DU3_omvcgmUbmec",
                "authDomain": "spartafest-light-show.firebaseapp.com",
                "projectId": "spartafest-light-show",
                "storageBucket": "spartafest-light-show.firebasestorage.app",
                "messagingSenderId": "438044433117",
                "appId": "1:438044433117:web:523ae33d8bf9f2131ed934"
            },
            {
                "apiKey": "AIzaSyBLTAL6XGY3we3h59oS6l7mqUiQzBn8H0M",
                "authDomain": "spartafest-light-show-f9608.firebaseapp.com",
                "projectId": "spartafest-light-show-f9608",
                "storageBucket": "spartafest-light-show-f9608.firebasestorage.app",
                "messagingSenderId": "970442612141",
                "appId": "1:970442612141:web:8e67654abfba5e379f5524"
            },
            {
                "apiKey": "AIzaSyB8kIXsZTDWLv3sOU7oXxKGRBtFc0ZXnzU",
                "authDomain": "spartafest-light-show-2fc17.firebaseapp.com",
                "projectId": "spartafest-light-show-2fc17",
                "storageBucket": "spartafest-light-show-2fc17.firebasestorage.app",
                "messagingSenderId": "575025203672",
                "appId": "1:575025203672:web:3e33fc83b8851c681b0aad"
            },
            {
                "apiKey": "AIzaSyCRCeiJ-LEyEH8wHXf3Eh92whKj0OuEMnw",
                "authDomain": "spartafest-light-show-d5bd1.firebaseapp.com",
                "projectId": "spartafest-light-show-d5bd1",
                "storageBucket": "spartafest-light-show-d5bd1.firebasestorage.app",
                "messagingSenderId": "221806972239",
                "appId": "1:221806972239:web:f595dcd3dec3ff0c0e893a"
            },
            {
                "apiKey": "AIzaSyCNYbIGLAhF1PawsoTFYjQGn9LaofKbKc0",
                "authDomain": "spartafest-light-show-34048.firebaseapp.com",
                "projectId": "spartafest-light-show-34048",
                "storageBucket": "spartafest-light-show-34048.firebasestorage.app",
                "messagingSenderId": "86595145364",
                "appId": "1:86595145364:web:32854f60d2c2bce41a6e81"
            },
            {
                "apiKey": "AIzaSyDBNf_L7pFDzhy-4c814VenF5mcoN9E7d4",
                "authDomain": "spartafest-light-show-511b5.firebaseapp.com",
                "projectId": "spartafest-light-show-511b5",
                "storageBucket": "spartafest-light-show-511b5.firebasestorage.app",
                "messagingSenderId": "219110318684",
                "appId": "1:219110318684:web:312693a8d03cbd7b6afc99"
            },
            {
                "apiKey": "AIzaSyAmmex08U_3h67_j6tLxB6Y97pBrUxoZgU",
                "authDomain": "spartafest-light-show-aca73.firebaseapp.com",
                "projectId": "spartafest-light-show-aca73",
                "storageBucket": "spartafest-light-show-aca73.firebasestorage.app",
                "messagingSenderId": "378962049746",
                "appId": "1:378962049746:web:b028618bc971d6397bcb0b"
            },
            {
                "apiKey": "AIzaSyCx24SxXOrbZN_KngbZt1Mzvqyk1P_sbrc",
                "authDomain": "spartafest-light-show-caa4b.firebaseapp.com",
                "projectId": "spartafest-light-show-caa4b",
                "storageBucket": "spartafest-light-show-caa4b.firebasestorage.app",
                "messagingSenderId": "98785134551",
                "appId": "1:98785134551:web:d3f9fae2650cc9cef1ed92"
            },
            {
                "apiKey": "AIzaSyBeWaotNNd24V0gJBkdm1zH1ReGUM7rL7g",
                "authDomain": "login-6bf6c.firebaseapp.com",
                "projectId": "login-6bf6c",
                "storageBucket": "login-6bf6c.firebasestorage.app",
                "messagingSenderId": "584216397876",
                "appId": "1:584216397876:web:c2a51aee9eadf6f1386261"
            },
            {
                "apiKey": "AIzaSyBFXDihFCY2ujjCUnfQCBhSLb6CYZhdZ18",
                "authDomain": "spartafest-light-show-c857a.firebaseapp.com",
                "projectId": "spartafest-light-show-c857a",
                "storageBucket": "spartafest-light-show-c857a.firebasestorage.app",
                "messagingSenderId": "526741058778",
                "appId": "1:526741058778:web:0d7b0d5ea2fbefcebaa1e3"
            },
            {
                "apiKey": "AIzaSyAc7KcsurTG5aUZiQoY3oXs0NJ6eD1C_8k",
                "authDomain": "spartafest-light-show-2.firebaseapp.com",
                "projectId": "spartafest-light-show-2",
                "storageBucket": "spartafest-light-show-2.firebasestorage.app",
                "messagingSenderId": "891237947797",
                "appId": "1:891237947797:web:263d00a12cf626817f7e9c"
            },
            {
                "apiKey": "AIzaSyB8CRVVHoco8Eo2Kgnivz4V_L2Xl24Fq7Q",
                "authDomain": "spartafest-light-show-3.firebaseapp.com",
                "projectId": "spartafest-light-show-3",
                "storageBucket": "spartafest-light-show-3.firebasestorage.app",
                "messagingSenderId": "739528906805",
                "appId": "1:739528906805:web:8ee4fc9d7eacb976a2f97c"
            },
            {
                "apiKey": "AIzaSyDxxsbxCvSbu3FdmZf2wrfMSc3CbOX2Z5A",
                "authDomain": "spartafest-light-show-73925.firebaseapp.com",
                "projectId": "spartafest-light-show-73925",
                "storageBucket": "spartafest-light-show-73925.firebasestorage.app",
                "messagingSenderId": "950212727438",
                "appId": "1:950212727438:web:5d40e97d0a087cc6c26fdf"
            },
            {
                "apiKey": "AIzaSyDrJtVcWcrNQISQIUE09tVdG4CNgKKdWUU",
                "authDomain": "spartafest-light-show-1.firebaseapp.com",
                "projectId": "spartafest-light-show-1",
                "storageBucket": "spartafest-light-show-1.firebasestorage.app",
                "messagingSenderId": "824918389420",
                "appId": "1:824918389420:web:5f9670a7baade372a16509"
            },
            {
                "apiKey": "AIzaSyA-Os8fVgNOgnw_oY9bvjsHMjAEm7f9ab0",
                "authDomain": "spartafest-light-show-5.firebaseapp.com",
                "projectId": "spartafest-light-show-5",
                "storageBucket": "spartafest-light-show-5.firebasestorage.app",
                "messagingSenderId": "72451860916",
                "appId": "1:72451860916:web:3f7b859be5ec771ca6aae1"
            },
            {
                "apiKey": "AIzaSyACAx5p0oXSlyZX6813_QDnIvXwNMNHFFE",
                "authDomain": "spartafest-light-show-6.firebaseapp.com",
                "projectId": "spartafest-light-show-6",
                "storageBucket": "spartafest-light-show-6.firebasestorage.app",
                "messagingSenderId": "620027996670",
                "appId": "1:620027996670:web:7474757f52bcfc6e5f38af"
            },
            {
                "apiKey": "AIzaSyDg-2_cq5dyZed3GI4mLOR5Tb1-lk6dUSg",
                "authDomain": "spartafest-light-show-7.firebaseapp.com",
                "projectId": "spartafest-light-show-7",
                "storageBucket": "spartafest-light-show-7.firebasestorage.app",
                "messagingSenderId": "830383004522",
                "appId": "1:830383004522:web:ca701f35fee5cad5956313"
            },
            {
                "apiKey": "AIzaSyC17oKO54nAnXbsxW5LUwdJve9A0DIMJyg",
                "authDomain": "spartafest-light-show-682f1.firebaseapp.com",
                "projectId": "spartafest-light-show-682f1",
                "storageBucket": "spartafest-light-show-682f1.firebasestorage.app",
                "messagingSenderId": "1010757733582",
                "appId": "1:1010757733582:web:d10784526f69ecd5a0149f"
            },
            {
                "apiKey": "AIzaSyCJw8YcpQCvurFjKlo175ZH_rp_d5X937k",
                "authDomain": "spartafest-light-show-9.firebaseapp.com",
                "projectId": "spartafest-light-show-9",
                "storageBucket": "spartafest-light-show-9.firebasestorage.app",
                "messagingSenderId": "114098478169",
                "appId": "1:114098478169:web:eba7b2e72507374cb1e548"
            },
            {
                "apiKey": "AIzaSyA6JsCx0P0VlN_w33PsQef5gogB6LYkLd8",
                "authDomain": "spartafest-light-show-10.firebaseapp.com",
                "projectId": "spartafest-light-show-10",
                "storageBucket": "spartafest-light-show-10.firebasestorage.app",
                "messagingSenderId": "304579628364",
                "appId": "1:304579628364:web:270e8fba53df42c71c13e9"
            },
            {
                "apiKey": "AIzaSyBjL0yx6xNCnwJfjFwJihKzdqPPWfos-Gk",
                "authDomain": "spartafest-light-show-11.firebaseapp.com",
                "projectId": "spartafest-light-show-11",
                "storageBucket": "spartafest-light-show-11.firebasestorage.app",
                "messagingSenderId": "647501946356",
                "appId": "1:647501946356:web:728a4d1def8ce838b32da1"
            },
            {
                "apiKey": "AIzaSyAn2eSRr5xVSRdpifi7kwEiUTiE_jjtrD4",
                "authDomain": "spartafest-light-show-1-51360.firebaseapp.com",
                "projectId": "spartafest-light-show-1-51360",
                "storageBucket": "spartafest-light-show-1-51360.firebasestorage.app",
                "messagingSenderId": "473571829499",
                "appId": "1:473571829499:web:d3793758c8508454f2b25e"
            },
            {
                "apiKey": "AIzaSyC6XnRnbtAbLJS9cGVanzPufejzwTuzmnE",
                "authDomain": "spartafest-light-show-2-d5a6c.firebaseapp.com",
                "projectId": "spartafest-light-show-2-d5a6c",
                "storageBucket": "spartafest-light-show-2-d5a6c.firebasestorage.app",
                "messagingSenderId": "842825346224",
                "appId": "1:842825346224:web:68f54e5e59a0a4aa48df75"
            },
            {
                "apiKey": "AIzaSyC5y8m5UhwopnB0tvKE3tMLzrN6y8FHSDA",
                "authDomain": "spartafest-light-show-3-7b3fa.firebaseapp.com",
                "projectId": "spartafest-light-show-3-7b3fa",
                "storageBucket": "spartafest-light-show-3-7b3fa.firebasestorage.app",
                "messagingSenderId": "627770503337",
                "appId": "1:627770503337:web:d0774e7f0b9cd3a0a339b8"
            },
            {
                "apiKey": "AIzaSyAY5yxXE4La2WYVbae7okte_y3OyEaaN84",
                "authDomain": "spartafest-light-show-4.firebaseapp.com",
                "projectId": "spartafest-light-show-4",
                "storageBucket": "spartafest-light-show-4.firebasestorage.app",
                "messagingSenderId": "28051173128",
                "appId": "1:28051173128:web:8dfca1edffdb6f3c68c6bd"
            },
            {
                "apiKey": "AIzaSyBu1jMonN2D8mZms343Ppzgiw95evGn3mI",
                "authDomain": "spartafest-light-show-5-334d8.firebaseapp.com",
                "projectId": "spartafest-light-show-5-334d8",
                "storageBucket": "spartafest-light-show-5-334d8.firebasestorage.app",
                "messagingSenderId": "51601270422",
                "appId": "1:51601270422:web:66e9d0a542936249b384b7"
            },
            {
                "apiKey": "AIzaSyC4d3lZX2804-5ArYgizmqtXBD7AN1yhYs",
                "authDomain": "spartafest-light-show-67fc1.firebaseapp.com",
                "projectId": "spartafest-light-show-67fc1",
                "storageBucket": "spartafest-light-show-67fc1.firebasestorage.app",
                "messagingSenderId": "382252956072",
                "appId": "1:382252956072:web:c873c00b9776631305059d"
            },
            {
                "apiKey": "AIzaSyCCRIlryDzqN9nbLzDK1pNGrNQAeWT8qUE",
                "authDomain": "spartafest-light-show-7-5bf5d.firebaseapp.com",
                "projectId": "spartafest-light-show-7-5bf5d",
                "storageBucket": "spartafest-light-show-7-5bf5d.firebasestorage.app",
                "messagingSenderId": "321620575364",
                "appId": "1:321620575364:web:5ba42368ce1900d6af6ed1"
            },
            {
                "apiKey": "AIzaSyBfrcY8Oq1av2dW0Zlf24_PNHj_ZXMceR4",
                "authDomain": "spartafest-light-show-2f818.firebaseapp.com",
                "projectId": "spartafest-light-show-2f818",
                "storageBucket": "spartafest-light-show-2f818.firebasestorage.app",
                "messagingSenderId": "442176875751",
                "appId": "1:442176875751:web:8fa0b815647a5dd56d4642"
            },
            {
                "apiKey": "AIzaSyA2hTA_G8EWzjzeQkvqwlOkJv29fjDBmyQ",
                "authDomain": "spartafest-light-show-9-a5ddb.firebaseapp.com",
                "projectId": "spartafest-light-show-9-a5ddb",
                "storageBucket": "spartafest-light-show-9-a5ddb.firebasestorage.app",
                "messagingSenderId": "97179297135",
                "appId": "1:97179297135:web:6512ad907904fd39cf749a"
            },
            {
                "apiKey": "AIzaSyCd_yyCCWYpns9d5XTjH-15yz-1HB6HXis",
                "authDomain": "spartafest-light-show-10-cb1ac.firebaseapp.com",
                "projectId": "spartafest-light-show-10-cb1ac",
                "storageBucket": "spartafest-light-show-10-cb1ac.firebasestorage.app",
                "messagingSenderId": "400526619561",
                "appId": "1:400526619561:web:091f7c76319d822fbd0ab8"
            },
            {
                "apiKey": "AIzaSyCjj4ITm6AECBp7rwYZYV2HSJp3ar79AMI",
                "authDomain": "spartafest-light-show-1-efdc9.firebaseapp.com",
                "projectId": "spartafest-light-show-1-efdc9",
                "storageBucket": "spartafest-light-show-1-efdc9.firebasestorage.app",
                "messagingSenderId": "378487304704",
                "appId": "1:378487304704:web:f1fd1156f03dc8213ddee5"
            },
            {
                "apiKey": "AIzaSyAYOwdRLSYBfA2K161GZVfHh7ngQUxmUQU",
                "authDomain": "spartafest-light-show-3-f5bac.firebaseapp.com",
                "projectId": "spartafest-light-show-3-f5bac",
                "storageBucket": "spartafest-light-show-3-f5bac.firebasestorage.app",
                "messagingSenderId": "979955640966",
                "appId": "1:979955640966:web:89048342ecfb672d4bff07"
            },
            {
                "apiKey": "AIzaSyD_ahlxz2tretunnJaZ749Te8s_s6nmx0Q",
                "authDomain": "spartafest-light-show-2-7d915.firebaseapp.com",
                "projectId": "spartafest-light-show-2-7d915",
                "storageBucket": "spartafest-light-show-2-7d915.firebasestorage.app",
                "messagingSenderId": "1064352295909",
                "appId": "1:1064352295909:web:1fcefae484b6ecb7c35d0c"
            },
            {
                "apiKey": "AIzaSyDXL7iSdXrP0WEl-dX8oMkd5vWk7BExnrI",
                "authDomain": "spartafest-light-show-4-8594e.firebaseapp.com",
                "projectId": "spartafest-light-show-4-8594e",
                "storageBucket": "spartafest-light-show-4-8594e.firebasestorage.app",
                "messagingSenderId": "302967657276",
                "appId": "1:302967657276:web:23cefb786ccbc59acc0439"
            },
            {
                "apiKey": "AIzaSyDMmcGsDP8ZJjgzdUU0vjXpxtFR9H87BT0",
                "authDomain": "spartafest-light-show-5-e7320.firebaseapp.com",
                "projectId": "spartafest-light-show-5-e7320",
                "storageBucket": "spartafest-light-show-5-e7320.firebasestorage.app",
                "messagingSenderId": "637399487911",
                "appId": "1:637399487911:web:865f8defc7d0b18c385282"
            },
            {
                "apiKey": "AIzaSyDfsfbiS_V9hhWkwTynD6n2pBzs41O5J3Q",
                "authDomain": "spartafest-light-show-6-51346.firebaseapp.com",
                "projectId": "spartafest-light-show-6-51346",
                "storageBucket": "spartafest-light-show-6-51346.firebasestorage.app",
                "messagingSenderId": "600885866546",
                "appId": "1:600885866546:web:4dea8145756463a1f08c2b"
            },
            {
                "apiKey": "AIzaSyD8hHnPJ2EZttUiciWXe2Df42w6tWPK4qA",
                "authDomain": "spartafest-light-show-8.firebaseapp.com",
                "projectId": "spartafest-light-show-8",
                "storageBucket": "spartafest-light-show-8.firebasestorage.app",
                "messagingSenderId": "175029137801",
                "appId": "1:175029137801:web:ca04c962f9b91469067158"
            },
            {
                "apiKey": "AIzaSyBptkDkLDlk1BqNGInN7KYsCyfAXhlRDKo",
                "authDomain": "spartafest-light-show-7-d0a54.firebaseapp.com",
                "projectId": "spartafest-light-show-7-d0a54",
                "storageBucket": "spartafest-light-show-7-d0a54.firebasestorage.app",
                "messagingSenderId": "370501194624",
                "appId": "1:370501194624:web:763d5469d34ca149586765"
            },
            {
                "apiKey": "AIzaSyAgM1bFx-NYM_R3575PKmt7xmsd8KzWC0M",
                "authDomain": "spartafest-light-show-9-a074a.firebaseapp.com",
                "projectId": "spartafest-light-show-9-a074a",
                "storageBucket": "spartafest-light-show-9-a074a.firebasestorage.app",
                "messagingSenderId": "753013919671",
                "appId": "1:753013919671:web:5f3320e45222271b96e232"
            },
            {
                "apiKey": "AIzaSyBr08MaX1vouI6h9qrNvBOeDR4P5dBp8LA",
                "authDomain": "spartafest-light-show-10-6206d.firebaseapp.com",
                "projectId": "spartafest-light-show-10-6206d",
                "storageBucket": "spartafest-light-show-10-6206d.firebasestorage.app",
                "messagingSenderId": "884857746855",
                "appId": "1:884857746855:web:1128d56981665b79b57282"
            },
            {
                "apiKey": "AIzaSyD9V82WvV2m7jZbjpKomZQzZAO_j4PcgxM",
                "authDomain": "spartafest-light-show-11-9da2c.firebaseapp.com",
                "projectId": "spartafest-light-show-11-9da2c",
                "storageBucket": "spartafest-light-show-11-9da2c.firebasestorage.app",
                "messagingSenderId": "742707673527",
                "appId": "1:742707673527:web:047b9475846fb192625032"
            },
            {
                "apiKey": "AIzaSyB5jW7Xv_xo35JDCjQ8TMmH6I2LoPt9R0U",
                "authDomain": "spartafest-light-show-1-8d747.firebaseapp.com",
                "projectId": "spartafest-light-show-1-8d747",
                "storageBucket": "spartafest-light-show-1-8d747.firebasestorage.app",
                "messagingSenderId": "164272036816",
                "appId": "1:164272036816:web:0e1670211109c90e71b7d5"
            },
            {
                "apiKey": "AIzaSyBq-v6FipVttot_W4BjOyLt98PBD9bveIE",
                "authDomain": "spartafest-light-show-2-875d2.firebaseapp.com",
                "projectId": "spartafest-light-show-2-875d2",
                "storageBucket": "spartafest-light-show-2-875d2.firebasestorage.app",
                "messagingSenderId": "4988837433",
                "appId": "1:4988837433:web:da9f1e151d39a4010037e8"
            },
            {
                "apiKey": "AIzaSyA1ZE-A7Srtwxh9fIvNTPAL-VB7cPvQCl8",
                "authDomain": "spartafest-light-show-4-24dd6.firebaseapp.com",
                "projectId": "spartafest-light-show-4-24dd6",
                "storageBucket": "spartafest-light-show-4-24dd6.firebasestorage.app",
                "messagingSenderId": "301905579354",
                "appId": "1:301905579354:web:3fab68ba3406807d02f763"
            },
            {
                "apiKey": "AIzaSyAhxRzJybECoDExbc0L5RAVF344v12sBPY",
                "authDomain": "spartafest-light-show-3-6fe77.firebaseapp.com",
                "projectId": "spartafest-light-show-3-6fe77",
                "storageBucket": "spartafest-light-show-3-6fe77.firebasestorage.app",
                "messagingSenderId": "1045129913893",
                "appId": "1:1045129913893:web:693f6b50ab6028d7b1c1cc"
            },
            {
                "apiKey": "AIzaSyBBNZtZQeVI8cTLdngWsY-ZyE-lQFVvbrY",
                "authDomain": "spartafest-light-show-5-c537c.firebaseapp.com",
                "projectId": "spartafest-light-show-5-c537c",
                "storageBucket": "spartafest-light-show-5-c537c.firebasestorage.app",
                "messagingSenderId": "1082812115992",
                "appId": "1:1082812115992:web:cd663dba4d64ad4314276d"
            },
            {
                "apiKey": "AIzaSyDo0W9148CnsjRSC8OvG4tqhJn-dV1qpeU",
                "authDomain": "spartafest-light-show-6-2f88e.firebaseapp.com",
                "projectId": "spartafest-light-show-6-2f88e",
                "storageBucket": "spartafest-light-show-6-2f88e.firebasestorage.app",
                "messagingSenderId": "552726696993",
                "appId": "1:552726696993:web:5849379796e686d1beff60"
            },
            {
                "apiKey": "AIzaSyBQMcn9M_POwD3sxb-8YlwHumCdZJcEwho",
                "authDomain": "spartafest-light-show-9-8e41c.firebaseapp.com",
                "projectId": "spartafest-light-show-9-8e41c",
                "storageBucket": "spartafest-light-show-9-8e41c.firebasestorage.app",
                "messagingSenderId": "1018692456966",
                "appId": "1:1018692456966:web:ab9f0fb0e037a68374e987"
            },
            {
                "apiKey": "AIzaSyDu2qdJJo248-xwto1dy4wHdxm4bqgBZds",
                "authDomain": "spartafest-light-show-7-6ab33.firebaseapp.com",
                "projectId": "spartafest-light-show-7-6ab33",
                "storageBucket": "spartafest-light-show-7-6ab33.firebasestorage.app",
                "messagingSenderId": "39756895336",
                "appId": "1:39756895336:web:764ed424e393556f9b57dd"
            },
            {
                "apiKey": "AIzaSyCwAslZMLzO1fv5Qv3UmWBnQIeYoQ1tIgU",
                "authDomain": "spartafest-light-show-8-30403.firebaseapp.com",
                "projectId": "spartafest-light-show-8-30403",
                "storageBucket": "spartafest-light-show-8-30403.firebasestorage.app",
                "messagingSenderId": "109135025261",
                "appId": "1:109135025261:web:4fec11be40ce8b3d275b64"
            },
            {
                "apiKey": "AIzaSyBAdy3jhCCzo6sak7bnBZvXDbLLndpFXwc",
                "authDomain": "spartafest-light-show-1-77d47.firebaseapp.com",
                "projectId": "spartafest-light-show-1-77d47",
                "storageBucket": "spartafest-light-show-1-77d47.firebasestorage.app",
                "messagingSenderId": "72308500575",
                "appId": "1:72308500575:web:7dd76263007ba7668593ea"
            },
            {
                "apiKey": "AIzaSyBb1WWJgGo8GdUt7SuZd0M_vU1D0aJZ9YA",
                "authDomain": "spartafest-light-show-3-e2de5.firebaseapp.com",
                "projectId": "spartafest-light-show-3-e2de5",
                "storageBucket": "spartafest-light-show-3-e2de5.firebasestorage.app",
                "messagingSenderId": "809522421625",
                "appId": "1:809522421625:web:53299cbc2da7bc95e7d9a8"
            },
            {
                "apiKey": "AIzaSyD-kE5q6Znk3hH05Tn-2hhRaXn0flzq5bk",
                "authDomain": "spartafest-light-show-2-f4d2b.firebaseapp.com",
                "projectId": "spartafest-light-show-2-f4d2b",
                "storageBucket": "spartafest-light-show-2-f4d2b.firebasestorage.app",
                "messagingSenderId": "535420977459",
                "appId": "1:535420977459:web:cdb58180482abff614fe46"
            },
            {
                "apiKey": "AIzaSyANr66hnmRNafkgKBNTXdqjK6EtxCkB948",
                "authDomain": "spartafest-light-show-5-bf3a7.firebaseapp.com",
                "projectId": "spartafest-light-show-5-bf3a7",
                "storageBucket": "spartafest-light-show-5-bf3a7.firebasestorage.app",
                "messagingSenderId": "591776558333",
                "appId": "1:591776558333:web:7c2d47489f4518e2f5a294"
            },
            {
                "apiKey": "AIzaSyC5Wo7pfvEPYtS96DDJZaoVai-Horp7wNw",
                "authDomain": "spartafest-light-show-4-2f6e5.firebaseapp.com",
                "projectId": "spartafest-light-show-4-2f6e5",
                "storageBucket": "spartafest-light-show-4-2f6e5.firebasestorage.app",
                "messagingSenderId": "275723495507",
                "appId": "1:275723495507:web:7fb952d460097610193ea6"
            },
            {
                "apiKey": "AIzaSyD_frbCDGk_wMJ1ANmmYtTIpUv8rlTUMxc",
                "authDomain": "spartafest-light-show-6-b6514.firebaseapp.com",
                "projectId": "spartafest-light-show-6-b6514",
                "storageBucket": "spartafest-light-show-6-b6514.firebasestorage.app",
                "messagingSenderId": "477257306730",
                "appId": "1:477257306730:web:a293d769935e97b20df013"
            },
            {
                "apiKey": "AIzaSyB4CCJbiSPgcz6w7-yUqA4hWh0NALIw2e8",
                "authDomain": "spartafest-light-show-7-1769e.firebaseapp.com",
                "projectId": "spartafest-light-show-7-1769e",
                "storageBucket": "spartafest-light-show-7-1769e.firebasestorage.app",
                "messagingSenderId": "473694478791",
                "appId": "1:473694478791:web:c2ed988aa802b218bfb9e2"
            },
            {
                "apiKey": "AIzaSyBLnzzod-__-Lx-4fbaRXQGXWd-cIoEYSk",
                "authDomain": "spartafest-light-show-9-909e9.firebaseapp.com",
                "projectId": "spartafest-light-show-9-909e9",
                "storageBucket": "spartafest-light-show-9-909e9.firebasestorage.app",
                "messagingSenderId": "121455085693",
                "appId": "1:121455085693:web:62c15ce21fe016e05a4914"
            },
            {
                "apiKey": "AIzaSyAJ9-GY6Zw-qLD5hwO6vgcCdzAJJCNOPAo",
                "authDomain": "spartafest-light-show-8-cd783.firebaseapp.com",
                "projectId": "spartafest-light-show-8-cd783",
                "storageBucket": "spartafest-light-show-8-cd783.firebasestorage.app",
                "messagingSenderId": "554354759234",
                "appId": "1:554354759234:web:289c0ad62ff7c9aad37fdb"
            },
            {
                "apiKey": "AIzaSyDZXAb9OUvwLcAMSS72-eIaBZIxaqiF6mc",
                "authDomain": "spartafest-light-show-10-244ed.firebaseapp.com",
                "projectId": "spartafest-light-show-10-244ed",
                "storageBucket": "spartafest-light-show-10-244ed.firebasestorage.app",
                "messagingSenderId": "1085232363225",
                "appId": "1:1085232363225:web:da55f89b7e7aa25b6b30c8"
            },
            {
                "apiKey": "AIzaSyCmta9DNKtDUQrVfS2jjO4sgEfV8nl2ysc",
                "authDomain": "spartafest-light-show-11-80319.firebaseapp.com",
                "projectId": "spartafest-light-show-11-80319",
                "storageBucket": "spartafest-light-show-11-80319.firebasestorage.app",
                "messagingSenderId": "600824057096",
                "appId": "1:600824057096:web:5288736d31f0c6696f70bd"
            },
            {
                "apiKey": "AIzaSyCfsrF6DpQfIbOmWgx9oGhn0r-Qo1grMHk",
                "authDomain": "spartafest-light-show-1-c1acc.firebaseapp.com",
                "projectId": "spartafest-light-show-1-c1acc",
                "storageBucket": "spartafest-light-show-1-c1acc.firebasestorage.app",
                "messagingSenderId": "786269942931",
                "appId": "1:786269942931:web:a22bdffd7c662283f5c966"
            },
            {
                "apiKey": "AIzaSyBRQiRn_zjWH98kAa-S5RX8eMUr70G9U9g",
                "authDomain": "spartafest-light-show-2-a2e39.firebaseapp.com",
                "projectId": "spartafest-light-show-2-a2e39",
                "storageBucket": "spartafest-light-show-2-a2e39.firebasestorage.app",
                "messagingSenderId": "608097081755",
                "appId": "1:608097081755:web:201addc24acd094221293e"
            },
            {
                "apiKey": "AIzaSyCCf3-b2QqK06b1COyfWLk57O6Nfly6Oeg",
                "authDomain": "spartafest-light-show-3-4e41d.firebaseapp.com",
                "projectId": "spartafest-light-show-3-4e41d",
                "storageBucket": "spartafest-light-show-3-4e41d.firebasestorage.app",
                "messagingSenderId": "12240371495",
                "appId": "1:12240371495:web:1c77d72f2964e7fd177302"
            },
            {
                "apiKey": "AIzaSyDMLY4nBU9mF9LDvM1uO0c1bEC_oouJhRE",
                "authDomain": "spartafest-light-show-4-2bfdb.firebaseapp.com",
                "projectId": "spartafest-light-show-4-2bfdb",
                "storageBucket": "spartafest-light-show-4-2bfdb.firebasestorage.app",
                "messagingSenderId": "318286877309",
                "appId": "1:318286877309:web:4086765380aa1670879714"
            },
            {
                "apiKey": "AIzaSyBzDPxNosjkDwcbJnL9LzumM7-RZWPqZv0",
                "authDomain": "spartafest-light-show-5-3f5c7.firebaseapp.com",
                "projectId": "spartafest-light-show-5-3f5c7",
                "storageBucket": "spartafest-light-show-5-3f5c7.firebasestorage.app",
                "messagingSenderId": "231344058883",
                "appId": "1:231344058883:web:26ef3477011b886e369436"
            },
            {
                "apiKey": "AIzaSyD3dobUdVaNfUZp0buFvA9mWQg3d_RjXNA",
                "authDomain": "spartafest-light-show-6-83bab.firebaseapp.com",
                "projectId": "spartafest-light-show-6-83bab",
                "storageBucket": "spartafest-light-show-6-83bab.firebasestorage.app",
                "messagingSenderId": "307894962477",
                "appId": "1:307894962477:web:6ce71b3f095412423b6ba4"
            },
            {
                "apiKey": "AIzaSyClRPU8dl7fdM1-TFQIzQYdTpHuJxbT7o4",
                "authDomain": "spartafest-light-show-7-9aecd.firebaseapp.com",
                "projectId": "spartafest-light-show-7-9aecd",
                "storageBucket": "spartafest-light-show-7-9aecd.firebasestorage.app",
                "messagingSenderId": "281450366181",
                "appId": "1:281450366181:web:b8f835932bdc8a8e1a800c"
            },
            {
                "apiKey": "AIzaSyDV0AM9K4zktQZaUyBhF8gLiHUqc-C82EE",
                "authDomain": "spartafest-light-show-8-85668.firebaseapp.com",
                "projectId": "spartafest-light-show-8-85668",
                "storageBucket": "spartafest-light-show-8-85668.firebasestorage.app",
                "messagingSenderId": "406168936659",
                "appId": "1:406168936659:web:14480441d906c3255e7426"
            },
            {
                "apiKey": "AIzaSyDZVAz5hPNY6JYJNpADuh-XVHUxEPz33LE",
                "authDomain": "spartafest-light-show-9-f81de.firebaseapp.com",
                "projectId": "spartafest-light-show-9-f81de",
                "storageBucket": "spartafest-light-show-9-f81de.firebasestorage.app",
                "messagingSenderId": "211314006572",
                "appId": "1:211314006572:web:3a8fd220755ccf54c60f89"
            },
            {
                "apiKey": "AIzaSyDomDWAG2zpO0BvBRWXiK1j97yiSy-396Y",
                "authDomain": "spartafest-light-show-10-e7c1c.firebaseapp.com",
                "projectId": "spartafest-light-show-10-e7c1c",
                "storageBucket": "spartafest-light-show-10-e7c1c.firebasestorage.app",
                "messagingSenderId": "847889080683",
                "appId": "1:847889080683:web:a6356177dfe6feafd52c2e"
            },
            {
                "apiKey": "AIzaSyBUUuNR_ONxv_D-nFzqqwn93govNyagFZI",
                "authDomain": "spartafest-light-show-2-1c5a2.firebaseapp.com",
                "projectId": "spartafest-light-show-2-1c5a2",
                "storageBucket": "spartafest-light-show-2-1c5a2.firebasestorage.app",
                "messagingSenderId": "255608691346",
                "appId": "1:255608691346:web:508d50c63b91339400644b"
            },
            {
                "apiKey": "AIzaSyCFPtkxKyyVBxSbPOSBwDSzPQwIkRrccCU",
                "authDomain": "spartafest-light-show-2-d9b72.firebaseapp.com",
                "projectId": "spartafest-light-show-2-d9b72",
                "storageBucket": "spartafest-light-show-2-d9b72.firebasestorage.app",
                "messagingSenderId": "498521151305",
                "appId": "1:498521151305:web:6139469a9f583446d16c98"
            },
            {
                "apiKey": "AIzaSyCnYO9Rt1uZbKrH1mEbHkPwtCdJXVWxyRY",
                "authDomain": "spartafest-light-show-4-f27d6.firebaseapp.com",
                "projectId": "spartafest-light-show-4-f27d6",
                "storageBucket": "spartafest-light-show-4-f27d6.firebasestorage.app",
                "messagingSenderId": "916591661161",
                "appId": "1:916591661161:web:3421d18ed1699d2f93d2f8"
            },
            {
                "apiKey": "AIzaSyC5MndnjAbCcU4jWPR7L998gr9Rde0U0ug",
                "authDomain": "spartafest-light-show-5-be1f6.firebaseapp.com",
                "projectId": "spartafest-light-show-5-be1f6",
                "storageBucket": "spartafest-light-show-5-be1f6.firebasestorage.app",
                "messagingSenderId": "655177381425",
                "appId": "1:655177381425:web:81e7880fe1eb675574c710"
            },
            {
                "apiKey": "AIzaSyDlHjgS2XleMMmLAF_h6ofMpg4BJo_CQ8w",
                "authDomain": "spartafest-light-show-6-44d06.firebaseapp.com",
                "projectId": "spartafest-light-show-6-44d06",
                "storageBucket": "spartafest-light-show-6-44d06.firebasestorage.app",
                "messagingSenderId": "283171319030",
                "appId": "1:283171319030:web:8eedec7714e3cc87ec50d7"
            },
            {
                "apiKey": "AIzaSyB1v4PSI9OxfHJYhPoVM0_Qh0uxDNzCMXE",
                "authDomain": "spartafest-light-show-7-588d2.firebaseapp.com",
                "projectId": "spartafest-light-show-7-588d2",
                "storageBucket": "spartafest-light-show-7-588d2.firebasestorage.app",
                "messagingSenderId": "251984493726",
                "appId": "1:251984493726:web:657169f2e496e08402cf8f"
            },
            {
                "apiKey": "AIzaSyDTx7NhXeAvCnREgIfZydBYf3UzBdomobY",
                "authDomain": "spartafest-light-show-8-b5864.firebaseapp.com",
                "projectId": "spartafest-light-show-8-b5864",
                "storageBucket": "spartafest-light-show-8-b5864.firebasestorage.app",
                "messagingSenderId": "1015093600448",
                "appId": "1:1015093600448:web:7a10c631e23f5a9aed0d25"
            },
            {
                "apiKey": "AIzaSyAlVUb62yYv_1QeQIzZlebcxWWCXDXyZ3I",
                "authDomain": "spartafest-light-show-9-da49a.firebaseapp.com",
                "projectId": "spartafest-light-show-9-da49a",
                "storageBucket": "spartafest-light-show-9-da49a.firebasestorage.app",
                "messagingSenderId": "826217860966",
                "appId": "1:826217860966:web:368203a98f7e07b2bc82a7"
            },
            {
                "apiKey": "AIzaSyA-NcX93vKatTIPCpi4XT8ZdZkqr-mrvqg",
                "authDomain": "spartafest-light-show-10-7c6bf.firebaseapp.com",
                "projectId": "spartafest-light-show-10-7c6bf",
                "storageBucket": "spartafest-light-show-10-7c6bf.firebasestorage.app",
                "messagingSenderId": "987866528154",
                "appId": "1:987866528154:web:4a279dbdd9d7b773832223"
            },
            {
                "apiKey": "AIzaSyARB-o4CvM6cpZtXNICxGO1nEl43x9ZydE",
                "authDomain": "spartafest-light-show-11-4916a.firebaseapp.com",
                "projectId": "spartafest-light-show-11-4916a",
                "storageBucket": "spartafest-light-show-11-4916a.firebasestorage.app",
                "messagingSenderId": "906888421105",
                "appId": "1:906888421105:web:b4d911ed1036727c82d350"
            }
        ];

        const workingIndexes = Array.from({ length: 82 }, (_, i) => i); // 82 shards
        const brokenIndexes = [];

        const firebaseApps = firebaseConfigs.map((config, index) => {
            try {
                return index === 0 ? firebase.initializeApp(config) : firebase.initializeApp(config, `app${index}`);
            } catch (err) {
                console.error(`‚ùå Firebase app ${index + 1} failed to initialize`, err);
                brokenIndexes.push(index);
                return null;
            }
        });

        function getOrCreateDeviceId() {
            let uid = localStorage.getItem('deviceUID');
            if (!uid) {
                uid = 'LED_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('deviceUID', uid);
            }
            return uid;
        }

        function getUserDb() {
            const uid = getOrCreateDeviceId();
            const numericId = uid.split('').reduce((acc, c) => acc + c.charCodeAt(0), 0);
            const dbIndex = Math.floor(numericId / 75); // 75 users per Firestore shard across 82 DBs (6150 users total)

            if (!workingIndexes.includes(dbIndex)) {
                console.warn(`‚ö†Ô∏è DB index ${dbIndex} not working. Falling back.`);
                const fallback = workingIndexes[0];
                const fallbackApp = fallback === 0 ? firebase.app() : firebase.app(`app${fallback}`);
                return fallbackApp.firestore();
            }

            const app = dbIndex === 0 ? firebase.app() : firebase.app(`app${dbIndex}`);
            return app.firestore();
        }

        // Usage
        const db = getUserDb();
        const auth = firebase.auth();
        
        // State
        let currentColor = '#ff0000';
        let currentEffect = 'solid';
        let currentIntensity = 1;
        let currentSpeed = 1;
        let userCount = 0;
        let isAuthenticated = false;
        let customPattern = {
            colors: ['#ff0000', '#00ff00', '#0000ff'],
            type: 'sequence'
        };
        
        // DOM elements
        const loginScreen = document.getElementById('loginScreen');
        const mainApp = document.getElementById('mainApp');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const adminUsername = document.getElementById('adminUsername');
        const adminPassword = document.getElementById('adminPassword');
        const loginError = document.getElementById('loginError');
        
        const connectionCard = document.getElementById('connectionCard');
        const connectionStatus = document.getElementById('connectionStatus');
        const userCountEl = document.getElementById('userCount');
        
        const colorButtons = document.querySelectorAll('.color-btn');
        const customColor = document.getElementById('customColor');
        const effectButtons = document.querySelectorAll('.effect-btn');
        const patternDesigner = document.getElementById('patternDesigner');
        const patternLights = document.querySelectorAll('.pattern-light');
        const patternButtons = document.querySelectorAll('.pattern-btn');
        
        const speedSlider = document.getElementById('speed');
        const speedValue = document.getElementById('speedValue');
        const intensitySlider = document.getElementById('intensity');
        const intensityValue = document.getElementById('intensityValue');
        
        const preview = document.getElementById('preview');
        const previewPattern = document.getElementById('previewPattern');
        const previewLights = document.querySelectorAll('.preview-light');
        
        const sendButton = document.getElementById('sendCommand');
        const emergencyButton = document.getElementById('emergencyStop');
        
        const shardCount = 10;

        // Authentication
        function login() {
            const email = adminUsername.value.trim();
            const password = adminPassword.value.trim();

            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    isAuthenticated = true;
                    loginScreen.classList.add('hidden');
                    mainApp.style.display = 'block';
                    localStorage.setItem('adminAuth', 'true');
                    loginError.textContent = '';
                    init();
                    showToast("‚úÖ Logged in successfully.");
                })
                .catch((error) => {
                    loginError.textContent = 'Login failed: ' + error.message;
                    adminPassword.value = '';
                    showToast("‚ùå Login failed. Check credentials.");
                });
        }

        function logout() {
            auth.signOut().then(() => {
                isAuthenticated = false;
                localStorage.removeItem('adminAuth');
                loginScreen.classList.remove('hidden');
                mainApp.style.display = 'none';
                showToast("üëã Logged out successfully.");
            }).catch((error) => {
                console.error("Logout failed:", error);
                showToast("‚ùå Logout failed.");
            });
        }
        
        function checkAuth() {
            auth.onAuthStateChanged((user) => {
                const wasAuthenticated = localStorage.getItem('adminAuth') === 'true';

                if (user && wasAuthenticated) {
                    isAuthenticated = true;
                    loginScreen.classList.add('hidden');
                    mainApp.style.display = 'block';
                    showToast("üîÑ Session restored. Welcome back!");
                    init(); // re-run any logic to set up the admin dashboard
                } else {
                    localStorage.removeItem('adminAuth');
                    isAuthenticated = false;
                    loginScreen.classList.remove('hidden');
                    mainApp.style.display = 'none';
                }
            });
        }

        // Event listeners for authentication
        loginBtn.addEventListener('click', login);
        logoutBtn.addEventListener('click', logout);
        
        adminPassword.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') login();
        });
        
        // Initialize app
        function init() {
            const savedColor = localStorage.getItem('customColor');
                if (savedColor) {
                    currentColor = savedColor;
                    customColor.value = savedColor;
                }
            updateConnectionStatus();
            setupColorControls();
            setupEffectControls();
            setupSliderControls();
            setupPatternDesigner();
            setupPreview();
            updateUserCountManually();
            updatePreview();
            const savedPatternColors = JSON.parse(localStorage.getItem('patternColors'));
                if (savedPatternColors && Array.isArray(savedPatternColors)) {
                    customPattern.colors = savedPatternColors;
                    document.querySelectorAll('.pattern-color').forEach((input, index) => {
                        input.value = savedPatternColors[index] || input.value;
                    });
                }
        }
        document.getElementById('refreshUserCount').addEventListener('click', () => {
            updateUserCountManually();
        });
        
        // Firebase connection and user count
        function updateConnectionStatus() {
            db.collection('system').doc('status').get()
                .then(() => {
                    connectionStatus.textContent = 'Connected';
                    connectionCard.classList.add('connected');
                })
                .catch(() => {
                    connectionStatus.textContent = 'Offline';
                    connectionCard.classList.remove('connected');
                });
        }
        
        async function updateUserCountManually() {
            let total = 0;

            for (let index of workingIndexes) {
                try {
                    const app = index === 0 ? firebase.app() : firebase.app(`app${index}`);
                    const dbInstance = app.firestore();
                    const doc = await dbInstance.collection('system').doc('userCount').get();
                    if (doc.exists) {
                        total += doc.data().count || 0;
                    }
                } catch (err) {
                    console.warn(`Failed to fetch userCount from shard ${index}`, err);
                }
            }

            userCountEl.textContent = total;
            showToast("User Count Updated");
        }

        
        // Color control
        function setupColorControls() {
            colorButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    colorButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentColor = btn.dataset.color;
                    updatePreview();
                });
            });
            
            customColor.addEventListener('change', (e) => {
                colorButtons.forEach(b => b.classList.remove('active'));
                currentColor = e.target.value;
                localStorage.setItem('customColor', currentColor); // Save
                updatePreview();
            });
        }
        
        // Effect controls
        function setupEffectControls() {
            effectButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    effectButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentEffect = btn.dataset.effect;
                    
                    if (currentEffect === 'pattern') {
                        patternDesigner.style.display = 'block';
                    } else {
                        patternDesigner.style.display = 'none';
                    }
                    
                    updatePreview();
                });
            });
        }
        
        // Pattern designer
        function setupPatternDesigner() {
            const patternColorPickers = document.querySelectorAll('.pattern-color');

            patternColorPickers.forEach(input => {
                input.addEventListener('input', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    customPattern.colors[index] = e.target.value;
                    localStorage.setItem('patternColors', JSON.stringify(customPattern.colors)); // Save
                    updatePreview();
                });
            });
        }

        
        // Slider controls
        function setupSliderControls() {
            speedSlider.addEventListener('input', (e) => {
                currentSpeed = parseFloat(e.target.value);
                speedValue.textContent = currentSpeed + 'x';
                updatePreview();
            });
            
            intensitySlider.addEventListener('input', (e) => {
                currentIntensity = parseFloat(e.target.value);
                intensityValue.textContent = Math.round(currentIntensity * 100) + '%';
                updatePreview();
            });
            
            sensitivitySlider.addEventListener('input', (e) => {
                sensitivityValue.textContent = e.target.value + '%';
            });
        }
        
        // Preview system
        function setupPreview() {
            updatePreview();
            setInterval(updatePreview, 100);
        }

        function showToast(message) {
            const container = document.getElementById("toastContainer");
            const toast = document.createElement("div");
            toast.className = "toast";
            toast.textContent = message;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }
        
        function updatePreview() {
            previewLights.forEach((light, index) => {
                if (currentEffect === 'pattern') {
                    light.style.background = customPattern.colors[index % customPattern.colors.length];
                } else {
                    light.style.background = currentColor;
                }
                
                light.style.opacity = currentIntensity;
                
                // Apply effects
                light.className = 'preview-light';
                if (currentEffect !== 'solid' && currentEffect !== 'pattern') {
                    light.classList.add(currentEffect);
                }
                
                // Adjust animation speed
                if (currentEffect !== 'solid') {
                    light.style.animationDuration = (1 / currentSpeed) + 's';
                }
            });
            
            // Pattern-specific animations
            if (currentEffect === 'pattern') {
                animatePattern();
            }
        }
        
        function animatePattern() {
            let colorIndex = 0;
            const colors = customPattern.colors;

            function showNextColor() {
                previewLights.forEach((light, index) => {
                    if (index === 0) {
                        light.style.background = colors[colorIndex % colors.length];
                        light.style.opacity = currentIntensity;
                    } else {
                        light.style.background = '#000';
                        light.style.opacity = 0.2;
                    }
                });

                colorIndex++;
                setTimeout(showNextColor, 600 / currentSpeed);
            }

            showNextColor();
        }
        
        // Command system
        let lastCommand = null;
        let debounceTimer;

        function broadcastToAllDbs(command) {
            workingIndexes.forEach(index => {
                try {
                    const app = index === 0 ? firebase.app() : firebase.app(`app${index}`);
                    const db = app.firestore();
                    const shardCount = 10;

                    for (let i = 0; i < shardCount; i++) {
                        const ref = db.collection("commands_sharded").doc(`shard_${i}`);
                        ref.set(command, { merge: true });
                    }
                } catch (e) {
                    console.error(`üî• Failed to write to DB index ${index}`, e);
                }
            });
        }
        
        // Action buttons
        sendButton.addEventListener('click', () => {
            if (confirm("Send command to all devices?")) {
                broadcastToAllDbs({
                    color: currentColor,
                    effect: currentEffect,
                    intensity: currentIntensity,
                    speed: currentSpeed,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    source: "admin"
                });
                showToast("üöÄ Command sent to all devices");
            }
        });
        
        emergencyButton.addEventListener('click', () => {
            if(confirm('Emergency stop will turn off all lights. Continue?')) {
                const emergencyCommand = {
                    color: '#000000',
                    effect: 'solid',
                    intensity: 0,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    source: 'admin'
                };
                
                broadcastToAllDbs(emergencyCommand);
                showToast("Emergency stop activated!");
            }
        });
        
        // Session timeout (30 minutes)
        let sessionTimeout;
        function resetSessionTimeout() {
            clearTimeout(sessionTimeout);
            sessionTimeout = setTimeout(() => {
                alert('Session expired for security. Please log in again.');
                logout();
            }, 1800000); // 30 minutes
        }
        
        // Reset timeout on user activity
        document.addEventListener('click', resetSessionTimeout);
        document.addEventListener('keypress', resetSessionTimeout);
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            checkAuth();
            //resetSessionTimeout();
        });
        
        // Prevent right-click context menu for security
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });
        
        // Disable F12 developer tools
        document.addEventListener('keydown', (e) => {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'C') ||
                (e.ctrlKey && e.key === 'U')) {
                e.preventDefault();
                return false;
            }
        });

        async function setStandbyMode(shardCount = 10) {
            const currentUser = firebase.auth().currentUser;
            if (!currentUser) {
                showToast("‚ùå Admin login required.");
                return;
            }

            const command = { effect: "standby" };

            for (const config of firebaseConfigs) {
                try {
                    const app = firebase.initializeApp(config, config.projectId + "-standby");
                    const db = firebase.firestore(app);

                    const batch = db.batch();
                    for (let i = 0; i < shardCount; i++) {
                        const ref = db.collection('commands_sharded').doc(`shard_${i}`);
                        batch.set(ref, command, { merge: true });
                    }

                    await batch.commit();
                    await app.delete();
                    console.log(`‚úÖ Standby broadcasted to ${config.projectId}`);
                } catch (err) {
                    console.error(`‚ùå Error broadcasting standby to ${config.projectId}`, err);
                }
            }
            showToast("üì¥ Standby mode activated on all devices.");
        }

        document.getElementById("standbyBtn").addEventListener("click", async () => {
            const confirmed = confirm("Put all devices into Standby mode?");
            if (confirmed) {
                await setStandbyMode(); // default 5 shards
            }
        });

        document.getElementById("clearAllBtn").addEventListener("click", async () => {
            const confirmed = confirm("‚ö†Ô∏è Are you sure you want to CLEAR ALL DATABASES? This action cannot be undone.");
            if (!confirmed) return;
            
            const collectionsToClear = ["users", "system"]; // Customize based on your Firestore structure

            for (const config of firebaseConfigs) {
                try {
                    const app = firebase.initializeApp(config, config.projectId + "-clear");
                    const db = firebase.firestore(app);

                    for (const collectionName of collectionsToClear) {
                        const snapshot = await db.collection(collectionName).get();
                        const batch = db.batch();
                        snapshot.forEach(doc => {
                            batch.delete(doc.ref);
                        });

                        if (!snapshot.empty) {
                            await batch.commit();
                            console.log(`Cleared '${collectionName}' in ${config.projectId}`);
                        } else {
                            console.log(`No documents in '${collectionName}' for ${config.projectId}`);
                        }
                    }

                    await app.delete();
                } catch (err) {
                    console.error(`‚ùå Error clearing ${config.projectId}:`, err);
                }
            }

            showToast("‚úÖ All specified databases and collections have been cleared.");
        });
        
        console.log('üîê Event LED Admin Panel Loaded - Unauthorized access is prohibited');
    </script>
</body>
</html>